name: "Kubernetes controller"

on: [push]

# Environment variables available to all jobs and steps in this workflow
env:
  REGISTRY_NAME: igorira/eesdevops-micro-livraria-controller
  CLUSTER_NAME: micro-livraria-controller-cls
  CLUSTER_RESOURCE_GROUP: rg-eesdevops-dev-main
  NAMESPACE: eesdevops-namespace
  SECRET: micro-livraria-controller-cr
  APP_NAME: micro-livraria-controller
  BUILD_FILE: services/controller
  
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@main
    - id: action
      uses: ./.github/actions/deploy-actions
      with:
        REGISTRY_NAME: ${{ env.REGISTRY_NAME }} 
        CLUSTER_NAME: ${{ env.CLUSTER_NAME }} 
        CLUSTER_RESOURCE_GROUP: ${{ env.CLUSTER_RESOURCE_GROUP }} 
        NAMESPACE: ${{ env.NAMESPACE }} 
        SECRET: ${{ env.SECRET }} 
        APP_NAME: ${{ env.APP_NAME }} 
        BUILD_FILE: ${{ env.BUILD_FILE }}
